/**
 * simple-bootstra-gallery (https://github.com/Kritten/simple-bootstrap-gallery)
 * Copyright Kristof Komlossy (Kritten)
 * All rights reserved.
 */
'use strict';var _createClass=function(){function a(b,c){for(var f,d=0;d<c.length;d++)f=c[d],f.enumerable=f.enumerable||!1,f.configurable=!0,'value'in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var Listener_Touch=function(){function a(b){_classCallCheck(this,a),this.m_target=b,this.m_callback_touch=void 0,this.m_callback_swipe=void 0,this.m_threshold_swipe=100,this.client_x_start=void 0,this.client_y_start=void 0;var c=this;this.m_target.on('touchstart',function(d){this.client_x_start=d.originalEvent.touches[0].clientX,this.client_y_start=d.originalEvent.touches[0].clientY}),this.m_target.on('touchend',function(d){var f=d.originalEvent.changedTouches[0].clientX-this.client_x_start,g=d.originalEvent.changedTouches[0].clientY-this.client_y_start,h=Math.abs(f),j=Math.abs(g);h<c.m_threshold_swipe&&j<c.m_threshold_swipe?c.m_callback_touch():c.m_callback_swipe(f,g,h,j)})}return _createClass(a,[{key:'on_touch',set:function set(b){this.m_callback_touch=b}},{key:'on_swipe',set:function set(b){this.m_callback_swipe=b}}]),a}(),Gallery=function(){function a(b,c){_classCallCheck(this,a),this.m_name_class_image='.sbg-image',this.m_duration_transition_images=200,this.m_duration_transition_controls=100,this.m_is_transitioning=!1,this.m_a_active=!1,this.m_gallery_active=void 0,this.m_html_modal=b,this.m_css_gallery=c,this.m_image=new Image,this.m_map_galleries=new Map,this.m_map_galleries.set('sbg-default',this.create_new_gallery()),this.init()}return _createClass(a,[{key:'init',value:function init(){$('body').append(this.m_html_modal),$('head').append(this.m_css_gallery);var b=this;$(this.m_name_class_image).each(function(c,d){var f=$(d),g=f.data('sbg-src');void 0==g&&(g=f.prop('src'));var h=b.select_gallery(f);h.map_images.set(g,h.list_images.length),h.list_images.push(g)}),this.m_image_a=$('#wrapper_gallery img.a'),this.m_image_b=$('#wrapper_gallery img.b'),this.m_image_a.hide(),this.m_image_b.hide(),$(this.m_name_class_image).on('click',function(){b.click_on_thumbnail(this)}),this.m_image.onload=function(){b.onload_image(this)},'ontouchstart'in document.documentElement?($('.carousel-control[data-direction="left"]').hide(),$('.carousel-control[data-direction="center"]').hide(),$('.carousel-control[data-direction="right"]').hide(),this.m_touch_listener=new Listener_Touch($('#wrapper_gallery')),this.m_touch_listener.on_touch=function(){b.click_on_control('center')},this.m_touch_listener.on_swipe=function(c,d,f,g){f>g&&(0>c?b.click_on_control('right'):b.click_on_control('left'))}):($('.carousel-control').hover(function(){$(this).fadeTo(b.m_duration_transition_controls,1)},function(){$(this).fadeTo(b.m_duration_transition_controls,0.5)}),$('.carousel-control').on('click',function(){var c=$(this).data('direction');b.click_on_control(c)}),$(window).on('keyup',function(c){37==c.which||33==c.which?b.click_on_control('left'):(39==c.which||34==c.which)&&b.click_on_control('right')}))}},{key:'click_on_thumbnail',value:function click_on_thumbnail(b){var c=$(b),d=c.data('sbg-src');void 0==d&&(d=c.prop('src'));var f=this.select_gallery(c);this.m_gallery_active=f,f.index_current=f.map_images.get(d),this.m_image_a.prop('src',''),this.m_image_b.prop('src',''),$('#gallery_modal_image').modal('show'),$('#gallery_modal_image .loader').show(),this.m_image.src=d}},{key:'click_on_control',value:function click_on_control(b){'center'==b?$('#gallery_modal_image').modal('hide'):!this.m_is_transitioning&&(this.m_is_transitioning=!0,'left'==b?(this.m_gallery_active.index_current-=1,-1>=this.m_gallery_active.index_current&&(this.m_gallery_active.index_current=this.m_gallery_active.list_images.length-1)):(this.m_gallery_active.index_current+=1,this.m_gallery_active.index_current>=this.m_gallery_active.list_images.length&&(this.m_gallery_active.index_current=0)),$('#gallery_modal_image .loader').show(),this.m_image.src=this.m_gallery_active.list_images[this.m_gallery_active.index_current])}},{key:'onload_image',value:function onload_image(b){var c=this.m_image_a,d=this.m_image_b;this.m_a_active&&(c=this.m_image_b,d=this.m_image_a),c.prop('src',b.src),d.css('opacity',1).fadeTo(this.m_duration_transition_images,0,function(){});var f=this;c.css('opacity',0).fadeTo(this.m_duration_transition_images,1,function(){f.m_is_transitioning=!1,f.m_a_active=!f.m_a_active}),$('#gallery_modal_image .loader').hide()}},{key:'create_new_gallery',value:function create_new_gallery(){return{index_current:0,map_images:new Map,list_images:[]}}},{key:'select_gallery',value:function select_gallery(b){var c=b.data('sbg-gallery'),d=this.m_map_galleries.get(c);return void 0==d&&(void 0==c?d=this.m_map_galleries.get('sbg-default'):(d=this.create_new_gallery(),this.m_map_galleries.set(c,d))),d}}]),a}(),css_gallery='\n<style type="text/css">\n    .modal-backdrop.show {\n        opacity: 0.9 !important;\n    }\n    #wrapper_gallery {\n        height: calc(100vh - 20px);\n    }\n    @media (min-width: 576px) {\n        #wrapper_gallery {\n            margin-left: 50px;\n            width: calc(100% - 100px);\n            height: calc(100vh - 60px);\n        }\n    }\n    #wrapper_gallery img {\n        max-height: calc(100vh - 20px);\n        max-width: calc(100vw - 20px);\n        width: auto;\n        position: absolute;\n    }\n    @media (min-width: 576px) {\n        #wrapper_gallery img {\n            max-height: calc(100vh - 60px);\n            max-width: calc(500px - 100px);\n        }\n    }\n    @media (min-width: 992px) {\n        #wrapper_gallery img {\n            max-width: calc(800px - 100px);\n        }\n    }\n    @media (min-width: 1200px) {\n        #wrapper_gallery img {\n            max-width: calc(1200px - 100px);\n        }\n    }\n    @media (min-width: 1200px) {\n        #gallery_modal_image .modal-dialog {\n            max-width: 1200px;\n        }\n    }\n    #gallery_modal_image .modal-content {\n        border: none;\n        background-color: transparent;\n    }\n    .carousel-control {\n        cursor: pointer;\n        position: absolute;\n        width: 50px; \n        height: calc(100vh - 60px);\n        z-index: 50;\n        opacity: 0.5;\n    }\n    .carousel-control[data-direction="center"] {\n        z-index: 100;\n        height: 50px; \n        right: 0;\n        text-align: center;\n        color: #fff;\n        line-height: 3rem;\n        font-size: 6rem;\n    }\n    .carousel-control[data-direction="right"] {\n        text-align: right;\n        right: 0;\n    }\n    #wrapper_gallery {\n        -moz-user-select: none;\n        -webkit-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n    }\n    .arrow {\n        border: solid #fff;\n        border-width: 0 0.5rem 0.5rem 0;\n        display: inline-block;\n        padding: 1rem;\n        margin-top: calc(50vh - 30px - 0.75rem);\n    }\n    .left {\n        transform: rotate(135deg);\n        -webkit-transform: rotate(135deg);\n    }\n    .right {\n        transform: rotate(-45deg);\n        -webkit-transform: rotate(-45deg);\n    }\n\n    .loader {\n        /* position: absolute;\n        color: #fff; */\n        z-index: 5;\n        border: 0.75rem solid rgba(255, 255, 255, 0.5);\n        border-top: 0.75rem solid #fff;\n        border-radius: 50%;\n        width: 6rem;\n        height: 6rem;\n        animation: spin 2s linear infinite;\n        -webkit-animation: spin 2s linear infinite;\n\n    }\n    .wrapper_loader {\n\n        z-index: 5;\n        position: absolute;\n    }\n    @keyframes spin {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n    }\n    @media screen and (-ms-high-contrast: active),\n        (-ms-high-contrast: none) {\n        #wrapper_gallery img {\n            transform: translate(-50%, -50%);\n        }\n        #gallery_modal_image {\n            min-height: 5000px;\n        }\n        .wrapper_loader {\n            display: none;\n        }\n    }\n</style>\n',html_modal='\n<div class="modal fade" id="gallery_modal_image" tabindex="-1" role="dialog">\n    <div class="modal-dialog modal-lg" role="document">\n        <div class="modal-content">\n            <div data-direction="left" class="carousel-control">\n                <i class="arrow left"></i>\n            </div>\n            <div data-direction="right" class="carousel-control">\n                <i class="arrow right"></i>\n            </div>\n            <div data-direction="center" class="carousel-control tmp_align-self-stretch">\n                &times;\n            </div>\n            <div id="wrapper_gallery" class="d-flex flex-row align-items-center justify-content-center">\n                <div class="wrapper_loader"><div class="loader"></div></div>\n                <img class="a rounded" src="">\n                <img class="b rounded" src="">\n            </div>\n        </div>\n    </div>\n</div>\n',gallery=new Gallery(html_modal,css_gallery);